<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RandBit Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* stone-100 */
            color: #292524; /* stone-800 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 350px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        .btn {
            transition: all 0.2s ease-in-out;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .code-block {
            background-color: #1c1917; /* stone-900 */
            color: #e7e5e4; /* stone-200 */
            border-radius: 0.5rem;
            padding: 1rem;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #44403c; /* stone-700 */
            color: #fafaf9; /* stone-50 */
            border: none;
            padding: 0.25rem 0.6rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.2s;
        }
        .copy-btn:hover {
            background-color: #57534e; /* stone-600 */
        }
        .slider-label {
            font-weight: 500;
            color: #57534e; /* stone-600 */
        }
        .slider-value {
            font-weight: 600;
            color: #0d9488; /* teal-600 */
        }
        .read-more {
            color: #0d9488; /* teal-600 */
            text-decoration: underline;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-stone-900">Pseudo-Random Bit Sequence</h1>
            <p class="mt-4 text-lg text-stone-600 max-w-3xl mx-auto">An interactive explorer for the Python-based binary data generator.</p>
        </header>

        <main>
            <!-- Section 1: Overview -->
            <section id="overview" class="mb-12 md:mb-16">
                <div class="bg-white p-8 rounded-xl shadow-sm border border-stone-200">
                    <h2 class="text-2xl md:text-3xl font-semibold text-stone-800 text-center mb-2">Project at a Glance</h2>
                    <p class="text-stone-600 text-center mb-8 max-w-2xl mx-auto">This project provides a simple utility for generating statistically sound pseudo-random binary data. The goal is to offer a customizable source of data for testing, simulations, or analysis. This dashboard brings the generator's capabilities to life.</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                        <div class="bg-stone-50 p-6 rounded-lg border border-stone-200">
                            <h3 class="text-4xl font-bold text-teal-600" id="stat-total-bits">10,000</h3>
                            <p class="mt-2 text-stone-600">Default Total Bits</p>
                        </div>
                        <div class="bg-stone-50 p-6 rounded-lg border border-stone-200">
                            <h3 class="text-4xl font-bold text-teal-600" id="stat-bits-per-line">100</h3>
                            <p class="mt-2 text-stone-600">Default Bits Per Line</p>
                        </div>
                        <div class="bg-stone-50 p-6 rounded-lg border border-stone-200">
                            <h3 class="text-4xl font-bold text-teal-600" id="stat-total-lines">100</h3>
                            <p class="mt-2 text-stone-600">Default Total Lines</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Interactive Demo -->
            <section id="demo" class="mb-12 md:mb-16">
                 <div class="bg-white p-8 rounded-xl shadow-sm border border-stone-200">
                    <h2 class="text-2xl md:text-3xl font-semibold text-stone-800 text-center mb-2">Generator in Action</h2>
                    <p class="text-stone-600 text-center mb-8 max-w-2xl mx-auto">Adjust the parameters below and click "Generate" to create a new pseudo-random sequence. The output and a statistical analysis of the bit distribution will be displayed in real-time.</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">

                        <!-- Controls -->
                        <div class="lg:col-span-2 space-y-4 bg-stone-50 p-6 rounded-lg border border-stone-200 self-start">
                            <h3 class="text-xl font-semibold text-stone-700 border-b pb-3">Controls</h3>
                            <div>
                                <label for="bitCount" class="block text-sm slider-label mb-2">Total Bits: <span id="bitCountValue" class="slider-value">10000</span></label>
                                <input type="range" id="bitCount" min="100" max="50000" step="100" value="10000" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                            </div>
                            <div>
                                <label for="bitsPerLine" class="block text-sm slider-label mb-2">Bits Per Line: <span id="bitsPerLineValue" class="slider-value">100</span></label>
                                <input type="range" id="bitsPerLine" min="10" max="200" step="10" value="100" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                            </div>
                            <button id="generateBtn" class="w-full bg-teal-600 text-white font-semibold py-3 px-6 rounded-lg btn shadow-sm hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 mt-4">
                                Generate Sequence
                            </button>
                            <button id="downloadBtn" class="w-full bg-stone-500 text-white font-semibold py-3 px-6 rounded-lg btn shadow-sm hover:bg-stone-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-stone-400" disabled>
                                Download Sequence (rand_bits.txt)
                            </button>
                        </div>

                        <!-- Output & Analysis -->
                        <div class="lg:col-span-3">
                             <div class="flex flex-col md:flex-row gap-6 mb-6 text-center">
                                <div class="flex-1 bg-stone-50 p-4 rounded-lg border border-stone-200">
                                    <p class="text-sm text-stone-500">Count of 0s</p>
                                    <p id="zerosCount" class="text-2xl font-bold text-stone-800">-</p>
                                </div>
                                <div class="flex-1 bg-stone-50 p-4 rounded-lg border border-stone-200">
                                    <p class="text-sm text-stone-500">Count of 1s</p>
                                    <p id="onesCount" class="text-2xl font-bold text-stone-800">-</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                                <div class="order-2 md:order-1">
                                    <h4 class="text-lg font-semibold text-stone-700 mb-2 text-center">Generated Output</h4>
                                    <textarea id="outputArea" readonly class="w-full h-64 md:h-80 bg-stone-900 text-stone-300 font-mono text-xs p-4 rounded-lg border border-stone-700 focus:outline-none focus:ring-2 focus:ring-teal-500" placeholder="Click 'Generate' to see the bit sequence..."></textarea>
                                </div>
                                <div class="order-1 md:order-2">
                                    <h4 class="text-lg font-semibold text-stone-700 mb-2 text-center">Bit Distribution</h4>
                                    <div class="chart-container">
                                        <canvas id="distributionChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: How It Works -->
            <section id="how-it-works" class="mb-12 md:mb-16">
                <div class="bg-white p-8 rounded-xl shadow-sm border border-stone-200">
                    <h2 class="text-2xl md:text-3xl font-semibold text-stone-800 text-center mb-2">How It Works</h2>
                    <p class="text-stone-600 text-center mb-8 max-w-2xl mx-auto">This script doesn't use true randomness (which is hard to achieve), but rather a powerful algorithm to create sequences that appear random and have the right statistical properties. This process is known as Pseudo-Random Number Generation (PRNG).</p>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8 text-center">
                        <div class="flex-1 bg-stone-50 p-6 rounded-lg border border-stone-200 max-w-sm">
                            <div class="text-3xl mb-3">üå±</div>
                            <h3 class="text-xl font-semibold text-stone-800">1. Seed</h3>
                            <p class="text-stone-600 mt-2">The process starts with an initial number, called a seed. This seed determines the entire sequence that will follow.</p>
                        </div>
                        <div class="text-4xl text-stone-300 font-light hidden md:block">‚Üí</div>
                        <div class="text-4xl text-stone-300 font-light md:hidden">‚Üì</div>
                        <div class="flex-1 bg-stone-50 p-6 rounded-lg border border-stone-200 max-w-sm">
                             <div class="text-3xl mb-3">‚öôÔ∏è</div>
                            <h3 class="text-xl font-semibold text-stone-800">2. Algorithm</h3>
                            <p class="text-stone-600 mt-2">The script uses the <strong> Mersenne Twister algorithm</strong>, a popular and robust PRNG, to perform complex mathematical operations on the number. <a href="https://www.sciencedirect.com/topics/computer-science/mersenne-twister" class="read-more" target="_blank"> Read More</a></p>
                        </div>
                        <div class="text-4xl text-stone-300 font-light hidden md:block">‚Üí</div>
                        <div class="text-4xl text-stone-300 font-light md:hidden">‚Üì</div>
                        <div class="flex-1 bg-stone-50 p-6 rounded-lg border border-stone-200 max-w-sm">
                            <div class="text-3xl mb-3">üî¢</div>
                            <h3 class="text-xl font-semibold text-stone-800">3. Sequence</h3>
                            <p class="text-stone-600 mt-2">The algorithm outputs a new number, which becomes the next value in the sequence and the input for the next step, creating a long, deterministic, but random-looking chain.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 4: Usage -->
            <section id="usage">
                 <div class="bg-white p-8 rounded-xl shadow-sm border border-stone-200">
                    <h2 class="text-2xl md:text-3xl font-semibold text-stone-800 text-center mb-2">Usage in Your Own Project</h2>
                    <p class="text-stone-600 text-center mb-8 max-w-2xl mx-auto">To use the original Python script, you can clone the repository from GitHub and run it on your local machine. This allows you to generate files for your own use cases.</p>
                    <div class="max-w-2xl mx-auto space-y-4">
                        <div>
                            <p class="font-medium text-stone-700 mb-2">1. Clone the repository:</p>
                            <div class="code-block">
                                <pre><code>git clone https://github.com/deedi80/randbitgen.git</code></pre>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                        </div>
                        <div>
                            <p class="font-medium text-stone-700 mb-2">2. Navigate into the directory and run the script:</p>
                            <div class="code-block">
                                <pre><code>cd randbitgen
python randbitgen.py</code></pre>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 md:mt-16 pt-8 border-t border-stone-200">
            <p class="text-stone-500">Interactive Application by Davison</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const bitCountSlider = document.getElementById('bitCount');
            const bitsPerLineSlider = document.getElementById('bitsPerLine');
            const bitCountValue = document.getElementById('bitCountValue');
            const bitsPerLineValue = document.getElementById('bitsPerLineValue');
            const generateBtn = document.getElementById('generateBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const outputArea = document.getElementById('outputArea');
            const zerosCountEl = document.getElementById('zerosCount');
            const onesCountEl = document.getElementById('onesCount');

            let distributionChart;

            function updateSliderValue(slider, display) {
                display.textContent = slider.value;
            }

            bitCountSlider.addEventListener('input', () => updateSliderValue(bitCountSlider, bitCountValue));
            bitsPerLineSlider.addEventListener('input', () => updateSliderValue(bitsPerLineSlider, bitsPerLineValue));

            generateBtn.addEventListener('click', () => {
                generateBtn.disabled = true;
                downloadBtn.disabled = true;
                generateBtn.textContent = 'Generating...';
                
                setTimeout(() => {
                    const count = parseInt(bitCountSlider.value);
                    const lineLength = parseInt(bitsPerLineSlider.value);
                    
                    let sequence = '';
                    for (let i = 0; i < count; i++) {
                        sequence += Math.round(Math.random());
                    }

                    displayOutput(sequence, lineLength);
                    analyzeSequence(sequence);
                    
                    generateBtn.disabled = false;
                    downloadBtn.disabled = false;
                    generateBtn.textContent = 'Generate Sequence';
                }, 50);
            });
            
            function displayOutput(sequence, lineLength) {
                let formattedOutput = '';
                for (let i = 0; i < sequence.length; i += lineLength) {
                    // Only add newline if we are not at the very end and there's content left
                    formattedOutput += sequence.substring(i, i + lineLength);
                    if (i + lineLength < sequence.length) {
                         formattedOutput += '\n';
                    }
                }
                outputArea.value = formattedOutput.trim();
            }
            
            function downloadSequence() {
                const text = outputArea.value;
                if (!text) return;

                // 1. Create a Blob (Binary Large Object) from the text data
                const blob = new Blob([text], { type: 'text/plain' });
                
                // 2. Create a temporary anchor element
                const a = document.createElement('a');
                a.style.display = 'none';

                // 3. Set the download URL and filename
                a.href = window.URL.createObjectURL(blob);
                a.download = 'rand_bits.txt';

                // 4. Simulate the click
                document.body.appendChild(a);
                a.click();

                // 5. Clean up the temporary elements
                window.URL.revokeObjectURL(a.href);
                document.body.removeChild(a);
            }

            downloadBtn.addEventListener('click', downloadSequence);

            function analyzeSequence(sequence) {
                let zeros = 0;
                let ones = 0;
                for (const bit of sequence) {
                    if (bit === '0') {
                        zeros++;
                    } else {
                        ones++;
                    }
                }
                zerosCountEl.textContent = zeros.toLocaleString();
                onesCountEl.textContent = ones.toLocaleString();
                updateChart(zeros, ones);
            }

            function createChart() {
                const ctx = document.getElementById('distributionChart').getContext('2d');
                distributionChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Zeros (0)', 'Ones (1)'],
                        datasets: [{
                            label: 'Bit Distribution',
                            data: [50, 50],
                            backgroundColor: [
                                'rgba(120, 113, 108, 0.7)', // stone-500
                                'rgba(29, 78, 216, 0.7)'  // muted blue for contrast
                            ],
                            borderColor: [
                                '#78716c', // stone-500
                                '#1d4ed8'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed !== null) {
                                            const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                            const percentage = total > 0 ? ((context.raw / total) * 100).toFixed(1) : 0;
                                            label += `${context.raw.toLocaleString()} (${percentage}%)`;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            function updateChart(zeros, ones) {
                 if (!distributionChart) {
                    createChart();
                }
                distributionChart.data.datasets[0].data[0] = zeros;
                distributionChart.data.datasets[0].data[1] = ones;
                distributionChart.update();
            }
            
            createChart();
        });

        function copyCode(button) {
            const pre = button.previousElementSibling;
            const code = pre.textContent;
            
            
            const tempInput = document.createElement('textarea');
            tempInput.value = code;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            button.textContent = 'Copied!';
            setTimeout(() => {
                button.textContent = 'Copy';
            }, 2000);
        }

    </script>
</body>
</html>
